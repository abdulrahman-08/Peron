"use strict";(self.webpackChunkPeron=self.webpackChunkPeron||[]).push([[17],{4017:(f,d,o)=>{o.r(d),o.d(d,{RentComponent:()=>w});var p=o(177),l=o(9417),_=o(7735),h=o(9909),t=o(6996),R=o(4203),c=o(1325),g=o(4796);function v(r,s){1&r&&t.nrm(0,"i",16)}function P(r,s){1&r&&t.nrm(0,"i",16)}function b(r,s){1&r&&t.nrm(0,"i",16)}function C(r,s){1&r&&t.nrm(0,"i",16)}function E(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",43),t.bIt("click",function(i){t.eBV(e);const a=t.XpG(2).$implicit;return t.XpG().addToWichList(a.propertyId),t.Njj(i.stopPropagation())}),t.nrm(1,"i",44),t.k0s()}}function I(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",43),t.bIt("click",function(i){t.eBV(e);const a=t.XpG(2).$implicit;return t.XpG().removeProuWichList(a.propertyId),t.Njj(i.stopPropagation())}),t.nrm(1,"i",45),t.k0s()}}function x(r,s){if(1&r&&(t.j41(0,"div",41),t.DNE(1,E,2,0,"button",42),t.DNE(2,I,2,0,"button",42),t.k0s()),2&r){const e=t.XpG().$implicit,n=t.XpG();t.R7$(1),t.Y8G("ngIf",!n.wishList.includes(e.propertyId)),t.R7$(1),t.Y8G("ngIf",n.wishList.includes(e.propertyId))}}const T=function(r,s){return{"fa-solid rating-color":r,"fa-regular text-secondary":s}};function O(r,s){if(1&r&&(t.qex(0),t.nrm(1,"i",46),t.bVm()),2&r){const e=s.$implicit,n=t.XpG().$implicit;t.R7$(1),t.Y8G("ngClass",t.l_i(1,T,e<=n.averageRating,e>n.averageRating))}}const y=function(r){return["/property",r]},M=function(){return[1,2,3,4,5]};function L(r,s){if(1&r&&(t.j41(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20),t.nrm(4,"img",21),t.k0s(),t.DNE(5,x,3,2,"div",22),t.j41(6,"div",23)(7,"a",24),t.EFF(8),t.k0s()()(),t.j41(9,"div",25)(10,"h5",26),t.EFF(11),t.k0s(),t.j41(12,"div",27),t.DNE(13,O,2,4,"ng-container",28),t.j41(14,"span",29),t.EFF(15),t.k0s()(),t.j41(16,"p",30),t.EFF(17),t.k0s(),t.j41(18,"div",31)(19,"div",32)(20,"div",33)(21,"div",34),t.nrm(22,"img",35),t.j41(23,"span",36),t.EFF(24),t.k0s()(),t.j41(25,"div",34),t.nrm(26,"i",37),t.j41(27,"span",38),t.EFF(28),t.k0s()(),t.j41(29,"div",34)(30,"span",38),t.nrm(31,"img",39),t.EFF(32),t.k0s()(),t.j41(33,"div",34)(34,"span",38),t.nrm(35,"img",40),t.EFF(36),t.k0s()()()()()()()()),2&r){const e=s.$implicit,n=t.XpG();t.R7$(1),t.Y8G("routerLink",t.eq3(13,y,e.propertyId)),t.R7$(3),t.Y8G("src",e.images[0],t.B4B)("alt",e.location),t.R7$(1),t.Y8G("ngIf",1==n.isLoggedIn),t.R7$(3),t.SpI(" EGP ",e.price," "),t.R7$(3),t.JRh(e.title),t.R7$(2),t.Y8G("ngForOf",t.lJ4(15,M)),t.R7$(2),t.JRh(e.averageRating),t.R7$(2),t.JRh(e.location),t.R7$(7),t.SpI(" ",e.bedrooms," Rooms"),t.R7$(4),t.SpI(" ",e.bathrooms," Bathrooms"),t.R7$(4),t.SpI(" ",e.bedrooms," Bed "),t.R7$(4),t.SpI(" ",e.area,"m\xb2 Area ")}}const m=function(r){return{"active-sort":r}};let w=(()=>{class r{constructor(e,n,i){this._PropertyService=e,this._WishListService=n,this.authService=i,this.propertys=[],this.filteredProperties=[],this.currentPage=1,this.sortBy="mostRented",this.searchQuery="",this.wishList=[],this.isLoggedIn=!1,this.topRentalProp=[]}ngOnInit(){this._PropertyService.getAllPropertys().subscribe({next:e=>{this.propertys=e,console.log(e),this.topRentalProp=e.sort((n,i)=>(i.averageRating||0)-(n.averageRating||0)),this.filteredProperties=[...this.propertys],this.sortProperties(this.sortBy)},error:e=>{console.error("\u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0639\u0642\u0627\u0631\u0627\u062a:",e)}}),this.checkLoginStatus()}checkLoginStatus(){this.authService.isLoggedIn.subscribe(e=>{this.isLoggedIn=e,1==e&&this._WishListService.getUserCart().subscribe({next:n=>{console.log(n),this._WishListService.wishCount.next(n.length);const i=n.map(a=>a.propertyId);this.wishList=i}})})}addToWichList(e){this._WishListService.addToWishList(e).subscribe({next:n=>{console.log(n),this.wishList=n.favorites.map(i=>i.propertyId),this._WishListService.wishCount.next(n.favorites.length)}})}removeProuWichList(e){this._WishListService.removeitem(e).subscribe({next:n=>{console.log(n),this.wishList=n.favorites.map(i=>i.propertyId),this._WishListService.wishCount.next(n.favorites.length)}})}sortProperties(e){switch(this.sortBy=e,e){case"mostRented":this.filteredProperties.sort((n,i)=>(i.averageRating||0)-(n.averageRating||0));break;case"largestArea":this.filteredProperties.sort((n,i)=>i.area-n.area);break;case"lowerArea":this.filteredProperties.sort((n,i)=>n.area-i.area);break;case"highestPrice":this.filteredProperties.sort((n,i)=>i.price-n.price)}}filterProperties(){if(this.searchQuery){const e=this.searchQuery.toLowerCase();this.filteredProperties=this.propertys.filter(n=>n.title?.toLowerCase().includes(e)||n.location?.toLowerCase().includes(e)||n.description?.toLowerCase().includes(e)||!1)}else this.filteredProperties=[...this.propertys];this.sortProperties(this.sortBy)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(R.X),t.rXU(c.z),t.rXU(g.u))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-rent"]],standalone:!0,features:[t.aNF],decls:38,vars:36,consts:[[1,"container",2,"margin-top","150px"],[1,"row","g-3","mb-4","justify-content-between","align-items-center"],[1,"col-md-2",2,"max-width","130px"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","text-start","sort-by-btn","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"ngClass","click"],["class","fas fa-check text-success ms-2",4,"ngIf"],[1,"col-md-3","offset-md-3"],[1,"search-container"],["type","text",1,"form-control","search-input","focus-ring-success","focus-ring",3,"placeholder","ngModel","ngModelChange","input"],[1,"fas","fa-search","search-icon"],[1,"rental-section","py-3"],[1,"container","position-relative"],[1,"row","g-4"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"fas","fa-check","text-success","ms-2"],[1,"col-md-6","col-lg-4"],[1,"card","rental-card",3,"routerLink"],[1,"position-relative"],[1,"container"],[1,"card-img-top",2,"border-radius","16px","margin-top","8px",3,"src","alt"],["class","position-absolute m-4 top-0 end-0",4,"ngIf"],[1,"position-absolute","bottom-0","m-4","end-0"],[1,"rounded-2","text-decoration-none","text-white","fw-bold","d-flex","justify-content-center","align-items-center",2,"width","110px","height","40px","background-color","var(--main-color)"],[1,"card-body"],[1,"card-title","my-2"],[1,"d-flex","align-items-center"],[4,"ngFor","ngForOf"],[1,"ms-2"],[1,"text-muted"],[1,"row","g-1","align-items-center","justify-content-between"],[1,"col-md-12","col-sm-12","col-12"],[1,"row","g-0"],[1,"col-md-6","col-sm-6","col-6"],["src","./assets/imgs/Icon-room.png","alt",""],[1,"fw-normal","fs-6",2,"color","#BFBFBF"],[1,"ms-2","fa-solid","fa-bath","fa-flip-horizontal",2,"color","#BFBFBF"],[1,"fw-normal",2,"color","#BFBFBF"],["src","./assets/imgs/ic-bed.png","alt",""],["src","./assets/imgs/icon_width.png","alt",""],[1,"position-absolute","m-4","top-0","end-0"],["class","btn text-success",3,"click",4,"ngIf"],[1,"btn","text-success",3,"click"],[1,"fa-regular","fa-heart","fs-1"],[1,"fa-solid","fa-heart","fs-1"],[1,"fa-star","me-1",3,"ngClass"]],template:function(n,i){1&n&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"ul",5)(8,"li")(9,"a",6),t.bIt("click",function(){return i.sortProperties("mostRented")}),t.EFF(10),t.nI1(11,"translate"),t.DNE(12,v,1,0,"i",7),t.k0s()(),t.j41(13,"li")(14,"a",6),t.bIt("click",function(){return i.sortProperties("largestArea")}),t.EFF(15),t.nI1(16,"translate"),t.DNE(17,P,1,0,"i",7),t.k0s()(),t.j41(18,"li")(19,"a",6),t.bIt("click",function(){return i.sortProperties("lowerArea")}),t.EFF(20),t.nI1(21,"translate"),t.DNE(22,b,1,0,"i",7),t.k0s()(),t.j41(23,"li")(24,"a",6),t.bIt("click",function(){return i.sortProperties("highestPrice")}),t.EFF(25),t.nI1(26,"translate"),t.DNE(27,C,1,0,"i",7),t.k0s()()()()(),t.j41(28,"div",8)(29,"div",9)(30,"input",10),t.bIt("ngModelChange",function(u){return i.searchQuery=u})("input",function(){return i.filterProperties()}),t.nI1(31,"translate"),t.k0s(),t.nrm(32,"i",11),t.k0s()()()(),t.j41(33,"section",12)(34,"div",13)(35,"div")(36,"div",14),t.DNE(37,L,37,16,"div",15),t.k0s()()()()),2&n&&(t.R7$(5),t.SpI(" ",t.bMT(6,16,"PROPERTY_FILTERS.SORT_BY")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(28,m,"mostRented"===i.sortBy)),t.R7$(1),t.SpI(" ",t.bMT(11,18,"PROPERTY_FILTERS.MOST_RENTED")," "),t.R7$(2),t.Y8G("ngIf","mostRented"===i.sortBy),t.R7$(2),t.Y8G("ngClass",t.eq3(30,m,"largestArea"===i.sortBy)),t.R7$(1),t.SpI(" ",t.bMT(16,20,"PROPERTY_FILTERS.LARGEST_AREA")," "),t.R7$(2),t.Y8G("ngIf","largestArea"===i.sortBy),t.R7$(2),t.Y8G("ngClass",t.eq3(32,m,"lowerArea"===i.sortBy)),t.R7$(1),t.SpI(" ",t.bMT(21,22,"PROPERTY_FILTERS.LOWER_AREA")," "),t.R7$(2),t.Y8G("ngIf","lowerArea"===i.sortBy),t.R7$(2),t.Y8G("ngClass",t.eq3(34,m,"highestPrice"===i.sortBy)),t.R7$(1),t.SpI(" ",t.bMT(26,24,"PROPERTY_FILTERS.HIGHEST_PRICE")," "),t.R7$(2),t.Y8G("ngIf","highestPrice"===i.sortBy),t.R7$(3),t.Y8G("placeholder",t.bMT(31,26,"PROPERTY_FILTERS.SEARCH_PLACEHOLDER"))("ngModel",i.searchQuery),t.R7$(7),t.Y8G("ngForOf",i.topRentalProp))},dependencies:[p.MD,p.YU,p.Sq,p.bT,l.YN,l.me,l.BC,l.vS,_.h,_.D9,h.Wk],styles:[".property-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.rental-card[_ngcontent-%COMP%]{border:1px solid #81818199!important;overflow:hidden;padding-top:10px;border-radius:26px!important;cursor:pointer}.sort-by-btn[_ngcontent-%COMP%]{border:1.5px solid var(--main-color);border-radius:6px;background-color:#fff;color:#333;font-weight:400;font-size:16px;padding:8px 6px;width:100%;text-align:center}[dir=rtl][_ngcontent-%COMP%]   .sortdiv[_ngcontent-%COMP%]{max-width:150px!important}.sort-by-btn[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-menu[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 10px #0000001a}.dropdown-item[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1.5px solid #eee!important}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.active-sort[_ngcontent-%COMP%]{font-weight:600;color:var(--main-color)}.search-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-input[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;padding-inline:16px 40px;padding-block:8px;font-size:16px;width:100%}.search-input[_ngcontent-%COMP%]::placeholder{color:#999}.search-icon[_ngcontent-%COMP%]{position:absolute;inset-inline-end:12px;top:50%;transform:translateY(-50%);color:#666;font-size:16px}[dir=rtl][_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{flex-direction:row-reverse}"]})}}return r})()},1325:(f,d,o)=>{o.d(d,{z:()=>h});var p=o(4412),l=o(6996),_=o(1626);let h=(()=>{class t{constructor(c){this._HttpClient=c,this.baseUrl="https://sakaniapi1.runasp.net/api/Favorites",this.wishCount=new p.t(0)}getUserCart(){return this._HttpClient.get(`${this.baseUrl}/user-favorites`,{withCredentials:!0})}addToWishList(c){return this._HttpClient.post(`${this.baseUrl}/add/${c}`,{withCredentials:!0})}removeitem(c){return this._HttpClient.delete(`${this.baseUrl}/remove/${c}`,{withCredentials:!0})}static{this.\u0275fac=function(g){return new(g||t)(l.KVO(_.Qq))}}static{this.\u0275prov=l.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()}}]);